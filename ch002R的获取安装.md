 数据分析与R语言002R的获取安装
 
[toc]

# R的获取安装

## 1、R的获取和安装

获取R的步骤如下：

Step 1: 登陆R语言官方网站 https://www.r-project.org, 点击download R;

Step 2：在弹出的镜像（Mirrors）页面上选择合适的镜像入口，如果你在中国，就直接选择China下离你近的一个镜像即可。

Step 3：选择镜像后就会跳出安装页面，此时即可根据自己电脑的操作系统选择相应链接下载。

这里说一下windows系统下的安装文件的下载。

网站上提供了两类Windows上的R安装文件：base和contrib。后者是一个包含了所有扩展包的Windows二进制安装文件，而前者仅仅是包含基本功能的二进制版本。包含所有扩展包显然太臃肿了，浪费下载的时间和流量。所以在安装阶段选 base 版本即可。以后可以在需要某个功能包时，再用`install.packages`函数来下载，非常方便的。
安装成功之后，在你的开始菜单中就会蹦出R应用程序的图标，点击它，你就同时打开了R图形用户界面（RGui）和R控制台（R Console）。是不是觉得界面太简陋，不够友好，那接下来就获取和安装R语言的集成开发工具软件吧。



【科普小知识】
1、CRAN是个啥？

它是Comprehensive R Archive Network 的简写, 是拥有同一资料,包括R的发布版本,包,文档和源代码的网络集合;

2、镜像CRAN Mirrors又是啥？为什么要选择一个镜像？

所谓镜像站，就是把一个网站资源的副本放在镜像服务器上，也就是说登录不同的镜像网站都跟登录主网站一样。而我们选择一个离我们近的镜像主要是为了下载更快！当然如果主站哪天不小心坏掉，镜像网站也是一个很好的后备军。

3、刚才提到的安装二进制版本，是唯一的安装方式嘛？

并不是，二进制是一种编译好的版本，不满足于基本配置并熟悉如何源代码安装的大神们也可以采用“源代码”安装方式，当然这需要其他的编译器。

## 2、最佳伴侣RStudio介绍

为了让R语言编程开发界面和操作更友好，我们需要安装其**集成开发工具(integrated development environment, IDE)** 。在免费的IDE软件中，有三个值得推荐：RStudio、 Revolution R Enterprise和IRkernel+Jupter notebook。先说一下Revolution R企业版是微软并购得到的R语言开发平台，对大数据处理和分析功能强大。IRkernel是Jupter notebook平台中调用的R语言内核。而Jupter notebook可能是python语言开发的最受欢迎的IDE软件。因为在python中有大量机器学习、深度学习的功能包，它也是目前大数据分析中很热门的语言。在Jupter notebook中通过调用IRkernel来执行R语言程序，这样就可以进行功能更为强大的混合编程。然后，隆重推出我重点推荐：全新的颜值担当—RStudio！更多关于R语言的工具、在各行各业应用的软件包的推荐清单请参考：
https://github.com/qinwf/awesome-R。

小贴士：所谓集成开发环境IDE，就是把你做开发工作所需要的代码编辑器呀、编译器呀、调试器等工具都集成在一个环境下，方便同时开工，有助于提高程序开发的效率。

获取和安装的步骤：
1在rstudio官方网站的下载页面选择相应的安装文件进行下载。
https://www.rstudio.com/products/rstudio/download/
如果你安装R，可以在RStudio下载网页中点击R的下载链接会转到R的下载网址。请确保在安装RStudio之前安装好R。
下载后按照界面提示一步步安装即可。


## 3、RStudio中程序开发示例
接下来，我们就通过一个简单的示例图来详细了解下RStudio各个模块的定义以及使用流程。Rstudio有着和著名的数值计算软件matlab相似的界面，有四个基本窗口：脚本编辑器窗口、控制台窗口、工作空间和操作历史窗口和绘图帮助等多功能窗口等。

首先，左上角是脚本编辑器，你需要先在这里写入你的编程代码。这里为大家提供两则温馨提示：其一，**程序的命令行中的符号要用英文符号**。例如，需要加双引号的地方一定要加英文格式的引号；其二，为了增加程序的可读性，在程序中应有注释行。注释行是用符号#开头的。机器看到它就会自动跳过运行下一行，合理的运用注释是程序开发所必须的。
```{R,zzt}
#查看系统自带的数据集mtcars内容
mtcars
#查看该数据集的帮助说明文档
help(mtcars)
df=mtcars
#查看数据集中前6个记录
head(df)
#绘制每加仑汽油英里数的直方图
hist(df$mpg, main="各车的每加仑汽油英里数的频数统计",
xlab = "每加仑汽油英里数",ylab = "车辆计数")
```
接着，写好代码后，选中或把光标停留在某行，点击run，即会给电脑就会执行该行代码。另外，也可以用快捷键**Ctrl+Enter**看看是否也可以达到同样效果？思考：如果要执行连续的几行代码，应如何操作？

当程序运行完毕后，你面前的界面会出现三个变化：第一个变化是在左下角的“控制台”，你会看到你所有代码的运行结果；第二个变化是在右上角的 “工作空间展示区”，你会看到程序新生成或者加载进工作空间的数据、函数等对象；如果你的程序中还有画图命令的话，还会在右下角展示出你漂亮的图形。这就是一个完整的运行流程啦！怎么样，是不是很简单，快拿起示意图里的例子练练手吧～

看到这里，你是不是要问，哦，那它不就只是把多种功能集合在一起的大R嘛？非也非也。它还有好多贴心技能，这里列举几点：

首先，它的安装不仅支持个人电脑的Windows，MacOX，服务器的Ubuntu，甚至在浏览器上你都可以通过RStudio Server编辑运行代码，界面跟桌面版完全相同，完全没有转移障碍！

其次，在你写代码的时候，它能够帮你智能高亮，自动填补，以及快速显示函数解释。下面是一个简单的例子，大家看，如果我想输入求均值的mean函数，不需要我拼写完整，RStudio就会自动显示出可能用到的完整函数和解释。另外注意看，与round函数前面左括号匹配的右括号也自动的跟在mean后面，即使你忘记写了它也能帮你妥妥地补全哟～

怎么样？是不是觉得有了它，你码代码再也不用眯着眼看自己是不是掉了括号；再也不用一遍一遍重复想自己的变量名全称到底是个啥; 再也不用为了一个小函数的功能各种翻书搜网，从此编码手速快到飞起！

## 4、R的各种程序包的获取与安装
最后一部分，我们来介绍R里面可大大拓展你分析技能的利器：R包！

### 1什么是R包，我们为啥要装它？
所谓R包，就是一个把R函数，数据，预编译代码以一种定义完善的格式组成在一起的集合。

R在安装的时候会自带一系列默认包（包括base, datasets, stats,methods, graphics等包）, 它们提供了很多丰富功能的函数与数据，大家可以自行调出玩耍，命令search() 可以告诉你工作空间里已有哪些包可被直接使用。当然，如果你需要装备更多更厉害的拓展技能，就需要安装新包来实现啦！

### 2怎么安装包？

   一般的安装做法有两种，一种是通过CRAN服务器安装；另一种是从Github上下载安装，可做为第一种的补充。

第一种方法最常用。在RStudio中你可以有两种方法实现，一种是直接通过命令装包：install.packages ("package_name") 即可搞定！另一种是选中右下方的界面中的 Packages 标签页后，点击Install，就会弹出这个方框，直接在其中输入包包的大名就可以啦！

RStudio默认采用的是Global镜像在国外，有时下载较慢，更换为本地镜像的话可能下载会快些。设置下载点的步骤是：点击“Tools→Global Options” 打开Options界面如下图，在Packages选项卡中就可以更换你的镜像了～


第二种方式是：通过Github来装！

大家应该还记得上次我们介绍的Github网站，新手建好包一般会先放在那里接受群众检阅，因此我们就有了这么一个下载新包的渠道——Github。一个 R包在Github上是这样呈现的：

你或许心里嘀咕了：是不是要从这个网站上下载好再装进R呢？不需要！R里有一些 Github传送专用包如devtools，其中install_github函数就专为从Github传包设计。我们以一个R包praise为例，它的安装语句如下：
```
library("devtools")
install_github("gaborcsardi/praise")
```
需要提醒大家的一点是：用此函数安包时，需在前面加上它所在的库名，此处praise包的库是gaborcsardi。

（高能预警：此处默默安利的praise包，江湖代号蛇精包，凡安装并调出praise()函数的用户，都会情不自禁笑出声哦，不信者禁用！）

另外一则小贴士：一个包只要安装一次即可永久使用。但包作者冷不丁更新怎么办？命令 update.packages()即可迅速更新已经安装的包。RStudio里面右下部分有一键更新包按钮，细心的童鞋是不是在刚才的安装图中就已经发现啦？

### 3怎么加载包？
装完直接就能用？NoNoNo，就好像你从商场买了件衣服放进衣柜，你每次穿不得从衣柜里再拿出来才穿嘛？包也是一样，你装好了包只是把它放在库里，用的时候需要打开才能调用它的函数。打开的方式很简单，选用以下函数之一即可完成。
```
library("package_name")
require("package_name")
```
### 4如何用好一个包？

（1）想做某事，我咋知道什么包可以完成？

娱乐找度娘，工作靠谷歌！上不了？科学上网呗。另外，R站内还有一个按照任务归类方法及包的地方：
( http://cran.r-project.org/web/views/)

你可以在其中寻找与你的研究相近的主题，说不定能捕获很多意外的惊喜哟！

（2）有了好多可用包我咋知道该选谁？

Crantastic网站(http://www.crantastic.org/popcon）是个好地方，有各种包的使用热度排名可以参考哟～

（3）好包入手我咋知道它咋用？

问问问，R里强大的帮助系统永远是你的坚强后盾！RStudio右下角界面的搜索框就是你的贴身顾问，如下图所示：

另外输入命令help(package="package_name")也会把帮助界面送到你面前，里面既有对此包技能的整体描述、使用指南等文档，还有包内所含的函数列表。想了解具体函数用法？直接点击函数名即可。如果知道函数名，但不知道怎么用，只有输入：?函数名 就可以了。

（4）函数解释辣么多，我该从哪里看起呐？

从两个地方切入看更方便：一个是先读Description（功能描述）和Usage（用法），整体了解函数基本功能及参数设置, 第二个就是函数最后附带的Examples，把它粘进编辑器，反复运行体会每个参数的含义，把玩一番你就了解的差不多啦！当然如果需要更高级更透彻的理解函数，你还是得好好弄懂术语，理解中间每个参数的用法，那就是高手的进阶之路啦！

## 温馨小结

- 在RStudiao官方网站的下载页面上也有R的下载链接。
- 先安装R，再安装RStudio
- 选择一个就近的R语言及官方包的下载源，下载不下来再换个试试。
- 安装后赶快设置文件的编码方式为UTF-8来对付中文乱码问题。
主菜单栏Tools-Globe options-Code-Saving-default text encoding:点选UTF-8。



> Written with [StackEdit](https://stackedit.io/).